
### 来源

问题来源于： http://codeforces.com/contest/834/problem/D

### 描述

给一个数列包含n个元素， 要求将其划分成k段，每一段必须是数列中连续的一段，并且k段连起来就是原来数列。
又给每一段定义一个分数，即这一段中不同元素的个数。
求k段分数和最大值。

### 分析

比较明显的动态规划类型， 状态也明显dp[i][j]表示前i个元素划分成j段分数的最大值，转移就稍显麻烦。

转移： dp[i][j] = max(dp[k-1][j-1] + c[k][i]).

c[k][i]表示从k到i有多少个不同的元素，转移方程的含义是将前k-1个元素分成j-1段，加上从k到i的一段构成j段分数的最大值就是当前的dp[i][j]的取值。

但是这样枚举的话导致复杂度为O(n^2*k)，必然会超时。

一个可行的优化方法是使用线段树记录从左往右枚举时dp[k-1][j-1] + c[k][i]的值，当i变到i+1时，需要改变的值是[pre[i], i-1]，pre[i]表示a[i]上一次出现的
位置。也就是[pre[i], i-1]这个区间中的值全部要加1，当前的dp值就是线段树中[0,i]的最大值。

### Submission

http://codeforces.com/contest/834/submission/29344565

